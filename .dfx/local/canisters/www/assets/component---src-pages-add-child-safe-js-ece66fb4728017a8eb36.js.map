{"version":3,"sources":["webpack://doocoins/./src/pages/add_child_safe.js"],"names":["React","image","setImage","actor","setActor","then","module","default","onSubmit","e","preventDefault","card","inputs","target","querySelectorAll","email","querySelector","value","forEach","input","name","names","split","arr","Array","reverse","idx","add","join","btoa","mediatype","set","JSON","stringify","toJSON","alert","htmlFor","type","autoComplete","required","id","accept","onChange","file","files","reader","FileReader","addEventListener","result","readAsDataURL","src","alt"],"mappings":"8HA+GA,UA5Gc,WACZ,MAA0BA,WAAe,IAAlCC,EAAP,KAAcC,EAAd,KAEA,EAA0BF,WAAe,MAAlCG,EAAP,KAAcC,EAAd,KAgEA,OA9DAJ,aAAgB,WACd,8BAAmBK,MAAK,SAACC,GACvBF,EAASE,EAAOC,cAEjB,IA2DD,gCACE,uDACA,yCAGA,wBAAMC,SA9DV,SAAsBC,GACpBA,EAAEC,iBAEF,IAAMC,EAAO,GACPC,EAASH,EAAEI,OAAOC,iBAAiB,SACnCC,EAAQN,EAAEI,OAAOG,cAAc,uBAAuBC,MA4B5D,OA3BAL,EAAOM,SAAQ,SAACC,GACd,GAAmB,UAAfA,EAAMC,KACL,GAAmB,MAAfD,EAAMC,KAAc,CAE3B,IAAMC,EAAQF,EAAMF,MAAMK,MAAM,KAC1BC,EAAM,IAAIC,MAAM,GAEtBH,EAAMI,UAAUP,SAAQ,SAACE,EAAMM,GAC7BH,EAAIG,GAAON,KAGbT,EAAKgB,IAAI,KAAMR,EAAMF,OACrBN,EAAKgB,IAAIR,EAAMC,KAAMG,EAAIK,KAAK,WAE9BjB,EAAKgB,IAAIR,EAAMC,KAAMD,EAAMF,UAG/BN,EAAKgB,IAAI,QAASE,KAAK5B,GAAQ,CAAE6B,UAAW,cAE5C3B,WAAO4B,IAAIhB,EAAOiB,KAAKC,UAAUtB,EAAKuB,WAAW7B,MAAK,WACpD8B,MAAM,gBACNvB,EAAOM,SAAQ,SAACC,GACdA,EAAMF,MAAQ,MAEhBf,EAAS,QAGJ,IAgCD,yBAAOkC,QAAQ,KAAf,OAEE,yBAAOC,KAAK,OAAOjB,KAAK,IAAIkB,aAAa,UAE3C,2BACA,yBAAOF,QAAQ,SAAf,QAEE,yBAAOG,UAAQ,EAACF,KAAK,QAAQjB,KAAK,QAAQkB,aAAa,WAEzD,2BACA,yBAAOF,QAAQ,SAAf,kBAEE,yBACEC,KAAK,OACLG,GAAG,MACHpB,KAAK,QACLqB,OAAO,UACPC,SA9CZ,SAAsBjC,GACpB,IAAMkC,EAAOlC,EAAEI,OAAO+B,MAAM,GACtBC,EAAS,IAAIC,WAEnBD,EAAOE,iBACL,QACA,WAEE7C,EAAS2C,EAAOG,WAElB,GAGEL,GACFE,EAAOI,cAAcN,OAmChB1C,EAEG,uBAAKiD,IAAKjD,EAAOkD,IAAI,gCAErB,KACJ,2BACF,0BAAQd,KAAK,UAAb","file":"component---src-pages-add-child-safe-js-ece66fb4728017a8eb36.js","sourcesContent":["import * as React from \"react\";\n\n// markup\nconst Child = () => {\n  const [image, setImage] = React.useState(\"\");\n\n  const [actor, setActor] = React.useState(null);\n\n  React.useEffect(() => {\n    import(\"../actor\").then((module) => {\n      setActor(module.default);\n    });\n  }, []);\n\n  function handleSubmit(e) {\n    e.preventDefault();\n\n    const card = [];\n    const inputs = e.target.querySelectorAll(\"input\");\n    const email = e.target.querySelector('input[name=\"email\"]').value;\n    inputs.forEach((input) => {\n      if (input.name === \"photo\") return;\n      else if (input.name === \"n\") {\n        // Take full input and format for vcf\n        const names = input.value.split(\" \");\n        const arr = new Array(5);\n\n        names.reverse().forEach((name, idx) => {\n          arr[idx] = name;\n        });\n\n        card.add(\"fn\", input.value);\n        card.add(input.name, arr.join(\";\"));\n      } else {\n        card.add(input.name, input.value);\n      }\n    });\n    card.add(\"photo\", btoa(image), { mediatype: \"image/gif\" });\n\n    actor?.set(email, JSON.stringify(card.toJSON())).then(() => {\n      alert(\"Child Added!\");\n      inputs.forEach((input) => {\n        input.value = \"\";\n      });\n      setImage(\"\");\n    });\n\n    return false;\n  }\n\n  function handleUpload(e) {\n    const file = e.target.files[0];\n    const reader = new FileReader();\n\n    reader.addEventListener(\n      \"load\",\n      function () {\n        // convert image file to base64 string\n        setImage(reader.result);\n      },\n      false\n    );\n\n    if (file) {\n      reader.readAsDataURL(file);\n    }\n  }\n\n\n\n  return (\n    <>\n      <title>DooCoins - Add a Child</title>\n      <h1>Add a Child</h1>\n\n\n      <form onSubmit={handleSubmit}>\n\n\n          <label htmlFor=\"n\">\n            Name\n            <input type=\"text\" name=\"n\" autoComplete=\"name\" />\n          </label>\n          <br />\n          <label htmlFor=\"email\">\n            Email\n            <input required type=\"email\" name=\"email\" autoComplete=\"email\" />\n          </label>\n          <br />\n          <label htmlFor=\"photo\">\n            Profile picture\n            <input\n              type=\"file\"\n              id=\"img\"\n              name=\"photo\"\n              accept=\"image/*\"\n              onChange={handleUpload}\n            />\n          </label>\n          {image ? (\n\n              <img src={image} alt=\"user-uploaded profile image\" />\n\n          ) : null}\n          <br />\n        <button type=\"submit\">Add Child</button>\n      </form>\n    </>\n  );\n};\n\nexport default Child;"],"sourceRoot":""}